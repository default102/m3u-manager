# M3U Manager (M3U 订阅管理器)

一个轻量级、美观且响应式的 M3U 节目列表管理工具。支持分组编辑、拖拽排序、分类隐藏、数据备份及自动订阅导出。

## 🌟 核心功能

- **🚀 灵活导入**：支持通过远程 URL 或本地 `.m3u` 文件导入列表，支持覆盖更新并保留原有分组排序。
- **🎨 现代化 UI**：极简美观的界面设计，支持响应式布局，适配手机、平板及桌面浏览器。
- **📂 分组管理**：支持分类重命名、删除、拖拽排序，以及一键**隐藏指定分类**（隐藏分类及其节目不会出现在订阅链接中）。
- **🖱️ 频道编辑**：支持拖拽调整频道顺序，支持 **EPG 信息 (TVG-ID, TVG-Name)** 的深度编辑。
- **🛠️ 批量操作**：支持多选频道进行批量移动分组或一键删除。
- **💾 备份恢复**：内置数据库快照功能，支持一键备份当前数据或恢复历史备份。
- **🔗 订阅导出**：为每个列表生成唯一的固定 M3U 链接，兼容 APTV、PotPlayer 等主流播放器。

## 🚀 快速开始

### Docker 部署 (推荐)

1. **使用 Docker Compose**：
   在项目根目录下运行：
   ```bash
   docker-compose up -d
   ```

2. **手动运行容器**：
   ```bash
   # 构建镜像
   docker build -t m3u-manager .

   # 运行容器 (必须挂载 data 目录以持久化数据库和备份)
   docker run -d \
     -p 3000:3000 \
     -v $(pwd)/data:/app/data \
     --name m3u-app \
     m3u-manager
   ```

> **重要提示**：所有的持久化数据（包括数据库和历史备份）都存储在容器内的 `/app/data` 目录下。请务必映射此目录。

### 本地开发

1. **安装依赖**：
   ```bash
   npm install
   ```

2. **初始化数据库**：
   ```bash
   npx prisma db push
   ```

3. **启动服务**：
   ```bash
   npm run dev
   ```
   访问 [http://localhost:3000](http://localhost:3000)。

## 📝 订阅说明

- **导出地址格式**：`http://<您的服务器IP>:3000/api/export/<列表ID>`
- **兼容性**：输出已针对 APTV 等播放器优化，支持 CRLF 换行符及标准 MIME 类型。

## 🛡️ 安全建议

本工具为私有化部署设计，未内置登录鉴权。若需公网访问，建议：
1. 使用 Nginx / Caddy 配置 **Basic Auth**。
2. 通过 VPN 或 Tailscale 等内网穿透工具访问。

## 📄 开源协议

MIT License